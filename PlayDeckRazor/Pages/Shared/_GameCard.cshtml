@using PlayDeckRazor.Model
@model IndexModel
@{
    if (ViewData["GameCard"] is Game g)
    {
        <li>
            <div class="modal fade" id="delete-modal-@g.ID" tabindex="-1" role="dialog" aria-labelledby="delete-modal-title" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h2 class="modal-title" id="delete-modal-title-@g.ID">Warning!</h2>
                                </div>
                                <div class="modal-body">
                                    <p>
                                        Are you sure you want to remove <span style="color: #eb4155; font-weight: bold">@g.Title</span> from your collection? If you want to change which deck
                                        the game belongs to, use the edit button.
                                    </p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" title="Cancel">Cancel</button>
                                    <form method="post">
                                        <input type="hidden" asp-for="gameDeleteID" value="@g.ID"/>
                                        <input type="submit" value="I'm Sure" class="btn btn-danger" title="Delete game"/>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
            <div class="game-card card">
                <a asp-page="/GameView" asp-route-id="@g.ID">
                    @{
                        // Form image alt text
                        string s = g.Title + " video-game cover";

                        if (string.IsNullOrEmpty(g.ImageURL))
                        {
                            <div class="placeholder-container">
                                <img class="card-img-top" src="/Resources/Cover Placeholder.png" alt="@s">
                                <p class="placeholder-text">@g.Title</p>
                            </div>

                        }
                        else
                        {
                            <img class="card-img-top" src="@g.ImageURL" alt="@s">
                        }
                    }
                </a>
                <a class="delete-game-container" title="Delete" data-bs-toggle="modal" data-bs-target="#delete-modal-@g.ID">
                    <div class="delete-game-button d-inline-flex justify-content-center">
                        <p style="margin: 0">X</p>
                    </div>
                </a>
                <a asp-page="/Games/Edit" asp-route-id="@g.ID" class="edit-game-container" title="Edit">
                    <div class="edit-game-button d-inline-flex justify-content-center">
                        <p class="bi bi-pencil" style="margin: 0"></p>
                    </div>
                </a>
                <div class="rating-display-container d-flex flex-column">
                    <div style="margin-left: auto; margin-right: auto">
                        @{
                            if (g.PlayStatus == 1)
                            {
                                <span class="bi bi-trophy-fill trophy-checked"></span>
                            }
                            else
                            {
                                <span class="bi bi-trophy trophy-unchecked"></span>
                            }
                        }
                    </div>
                    <div class="d-flex" style="gap: 0.1vw;">
                        <span style="margin-top: 1px">@g.Rating</span>
                        <span class="bi bi-star-fill checked"></span>
                    </div>
                </div>
            </div>
        </li> 
    }
}
